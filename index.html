<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Minha Biblioteca</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #121212;
            color: white;
            font-family: Arial, sans-serif;
        }

        .home-container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 250px;
            background: #000;
            padding: 20px;
        }

        .sidebar h2 {
            color: #1DB954;
            margin-bottom: 20px;
        }

        .sidebar button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #333;
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        .sidebar button:hover {
            background: #444;
        }

        .search-container {
            display: flex;
            margin: 15px 0;
        }

        .search-container input {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 4px 0 0 4px;
            background: #333;
            color: white;
        }

        .search-container button {
            padding: 8px 12px;
            background: #1DB954;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            color: white;
        }

        .main {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .section-title {
            color: white;
            margin: 20px 0;
            font-size: 1.5rem;
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .card {
            background: #282828;
            padding: 15px;
            border-radius: 8px;
            transition: transform 0.2s;
            position: relative;
        }

        .card:hover {
            transform: scale(1.05);
            background: #383838;
        }

        .card img {
            width: 100%;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .card h4 {
            margin: 5px 0;
            color: white;
            font-size: 1rem;
        }

        .card p {
            color: #b3b3b3;
            font-size: 0.9rem;
        }

        .play-btn {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: #1DB954;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 1rem;
        }

        .card:hover .play-btn {
            opacity: 1;
        }

        /* Player de M√∫sica */
        .music-player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #181818;
            padding: 15px;
            border-top: 1px solid #282828;
            display: none;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
        }

        .player-visible {
            display: flex !important;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .player-album-cover {
            width: 60px;
            height: 60px;
            border-radius: 4px;
        }

        .player-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex: 1;
            justify-content: center;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 2;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: #404040;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }

        .progress {
            height: 100%;
            background: #1DB954;
            border-radius: 2px;
            width: 0%;
        }

        .time-display {
            color: #b3b3b3;
            font-size: 12px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: flex-end;
        }

        .volume-bar {
            width: 80px;
            height: 4px;
            background: #404040;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }

        .volume-level {
            height: 100%;
            background: #1DB954;
            border-radius: 2px;
            width: 70%;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: #1DB954;
        }

        .spinner {
            border: 4px solid #333;
            border-left: 4px solid #1DB954;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .search-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-button {
            background: #666;
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .back-button:hover {
            background: #777;
        }

        .artist-card {
            display: inline-block;
            background: #282828;
            padding: 20px;
            border-radius: 8px;
            margin: 10px;
            text-align: center;
            width: 150px;
        }

        .artist-card img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .follow-btn {
            background: transparent;
            border: 1px solid #1DB954;
            color: #1DB954;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Modal do YouTube */
        .youtube-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .youtube-modal-content {
            background: #1c1c1c;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            border: 2px solid #1DB954;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="home-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <h2>Minha Biblioteca</h2>
            <button id="criarPlaylistBtn">Criar playlist</button>
            <button id="explorePodcastsBtn">Explore podcasts</button>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Pesquisar m√∫sica, artista...">
                <button id="searchBtn">üîç</button>
            </div>
            <a href="login.html" style="color: white; text-decoration: none; display: block; margin-top: 20px;" onclick="return logout()">Sair</a>
        </div>

        <!-- Conte√∫do principal -->
        <div class="main">
            <!-- Loading -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>üéµ Buscando m√∫sicas...</p>
            </div>

            <!-- Resultados da pesquisa -->
            <div id="searchResultsSection" style="display: none;"></div>

            <!-- Conte√∫do principal -->
            <div id="mainContent">
                <!-- Playlists do usu√°rio -->
                <div>
                    <h3 class="section-title">Minhas Playlists</h3>
                    <div id="userPlaylists" class="cards">
                        <!-- Playlists ser√£o carregadas aqui -->
                    </div>
                </div>

                <!-- M√∫sicas em alta -->
                <div>
                    <h3 class="section-title">M√∫sicas em alta</h3>
                    <div id="popularSongs" class="cards">
                        <!-- M√∫sicas carregadas via JavaScript -->
                    </div>
                </div>

                <!-- Artistas populares -->
                <div>
                    <h3 class="section-title">Artistas populares</h3>
                    <div class="artists">
                        <div class="artist-card">
                            <img src="https://i.scdn.co/image/ab6761610000e5ebf6a6e2a4a3b7c2a7e3e3c3b2" alt="Drake">
                            <h4>Drake</h4>
                            <button class="follow-btn">Seguir</button>
                        </div>
                        <div class="artist-card">
                            <img src="https://i.scdn.co/image/ab6761610000e5ebf6a6e2a4a3b7c2a7e3e3c3b3" alt="The Weeknd">
                            <h4>The Weeknd</h4>
                            <button class="follow-btn">Seguir</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Player de M√∫sica -->
    <div id="musicPlayer" class="music-player">
        <div class="player-info">
            <img id="playerAlbumCover" src="" alt="Album Cover" class="player-album-cover">
            <div class="player-details">
                <h4 id="playerSongTitle">M√∫sica</h4>
                <p id="playerArtist">Artista</p>
            </div>
        </div>

        <div class="player-controls">
            <button class="control-btn" onclick="previousSong()">‚èÆ</button>
            <button class="control-btn" onclick="togglePlay()" id="playPauseBtn">‚ñ∂</button>
            <button class="control-btn" onclick="nextSong()">‚è≠</button>
        </div>

        <div class="progress-container">
            <span class="time-display" id="currentTime">0:00</span>
            <div class="progress-bar" onclick="seekSong(event)">
                <div class="progress" id="songProgress"></div>
            </div>
            <span class="time-display" id="totalTime">0:00</span>
        </div>

        <div class="volume-control">
            <span>üîä</span>
            <div class="volume-bar" onclick="changeVolume(event)">
                <div class="volume-level" id="volumeLevel"></div>
            </div>
        </div>
    </div>

    <!-- √Åudio invis√≠vel -->
    <audio id="audioPlayer" preload="metadata"></audio>

    <script>
        // ===== BIBLIOTECA DE M√öSICAS COM √ÅUDIOS QUE FUNCIONAM NO GITHUB =====
        const sampleSongs = [
            {
                id: 1,
                title: "Entrelinhas",
                artist: "Boaventura",
                cover: "https://i.scdn.co/image/ab67616d0000b273f0700f96146e437349a6ea20",
                audio: "https://cdn.pixabay.com/download/audio/2022/01/18/audio_d16713f565.mp3?filename=blinding-lights-150152.mp3",
                youtubeSearch: "boaventura entrelinhas",
                genre: "Hip Hop",
                playable: true
            },
            {
                id: 2,
                title: "Piloto da Nasa",
                artist: "Mc Kevin, Vulgo FK, Gaab",
                cover: "https://i.scdn.co/image/ab67616d00001e0220e020e6c6412855bc46b45c",
                audio: "https://cdn.pixabay.com/download/audio/2022/03/15/audio_6e465f8c3c.mp3?filename=hip-hop-rap-157687.mp3",
                youtubeSearch: "piloto da nasa mc kevin",
                genre: "Funk",
                playable: true
            },
            {
                id: 3,
                title: "Artista Gen√©rico",
                artist: "Veigh",
                cover: "https://m.media-amazon.com/images/I/41B1VbY-TwL._UXNaN_FMjpg_QL85_.jpg",
                audio: "https://cdn.pixabay.com/download/audio/2023/02/27/audio_1c38a3f9c5.mp3?filename=uplifting-rock-163147.mp3",
                youtubeSearch: "veigh artista gen√©rico",
                genre: "Trap",
                playable: true
            },
            {
                id: 4,
                title: "Blinding Lights",
                artist: "The Weeknd",
                cover: "https://i.scdn.co/image/ab67616d0000b2738863bc11d2aa12b54f5aeb36",
                audio: "https://cdn.pixabay.com/download/audio/2022/01/18/audio_d16713f565.mp3?filename=blinding-lights-150152.mp3",
                youtubeSearch: "the weeknd blinding lights",
                genre: "Pop",
                playable: true
            },
            {
                id: 5,
                title: "God's Plan",
                artist: "Drake",
                cover: "https://i.scdn.co/image/ab67616d0000b2736ba36e3e5d4a9a8bdd384c10",
                audio: "https://cdn.pixabay.com/download/audio/2022/03/15/audio_6e465f8c3c.mp3?filename=hip-hop-rap-157687.mp3",
                youtubeSearch: "drake god's plan",
                genre: "Hip Hop",
                playable: true
            }
        ];

        // ===== VARI√ÅVEIS GLOBAIS =====
        let currentSongIndex = 0;
        let isPlaying = false;
        let currentPlaylist = [];
        const audioPlayer = document.getElementById('audioPlayer');

        // ===== SISTEMA DE PESQUISA =====
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (!query) {
                alert('Digite algo para pesquisar!');
                return;
            }

            console.log('üîç Pesquisando por:', query);

            // Mostra loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('searchResultsSection').style.display = 'none';

            // Simula um delay de carregamento
            setTimeout(() => {
                const results = searchMusic(query);
                displaySearchResults(query, results);
                document.getElementById('loading').style.display = 'none';
            }, 500);
        }

        function searchMusic(query) {
            const results = {
                musicas: [],
                playlists: [],
                artistas: []
            };

            // Pesquisa nas m√∫sicas
            results.musicas = sampleSongs.filter(song => 
                song.title.toLowerCase().includes(query) || 
                song.artist.toLowerCase().includes(query) ||
                song.genre.toLowerCase().includes(query)
            );

            // Pesquisa nas playlists do usu√°rio
            const userPlaylists = JSON.parse(localStorage.getItem('userPlaylists')) || [];
            results.playlists = userPlaylists.filter(playlist => 
                playlist.name.toLowerCase().includes(query)
            );

            // Pesquisa artistas √∫nicos
            const artistasUnicos = [];
            sampleSongs.forEach(song => {
                if (song.artist.toLowerCase().includes(query) && 
                    !artistasUnicos.includes(song.artist)) {
                    artistasUnicos.push(song.artist);
                }
            });

            results.artistas = artistasUnicos.map(artista => {
                const musicaDoArtista = sampleSongs.find(song => song.artist === artista);
                return {
                    name: artista,
                    image: musicaDoArtista ? musicaDoArtista.cover : 'https://community.spotify.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2/image-size/original?v=mpbl-1&px=-1'
                };
            });

            return results;
        }

        function displaySearchResults(query, results) {
            const resultsSection = document.getElementById('searchResultsSection');
            
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="color: #1DB954; margin: 0;">üéµ Resultados para: "${query}"</h2>
                    <button class="back-button" onclick="showMainContent()">‚Üê Voltar ao In√≠cio</button>
                </div>
            `;

            // M√∫sicas encontradas
            if (results.musicas.length > 0) {
                html += `
                    <div style="margin: 30px 0;">
                        <h4 style="color: #1DB954; margin-bottom: 15px; font-size: 1.3rem;">üé∂ M√∫sicas (${results.musicas.length})</h4>
                        <div class="cards">
                            ${results.musicas.map(song => `
                                <div class="card">
                                    <img src="${song.cover}" alt="${song.title}" 
                                         onerror="this.src='https://community.spotify.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2/image-size/original?v=mpbl-1&px=-1'">
                                    <h4>${song.title}</h4>
                                    <p>${song.artist}</p>
                                    <small style="color: #1DB954; background: rgba(0,0,0,0.7); padding: 2px 6px; border-radius: 10px; font-size: 0.7rem;">
                                        ${song.genre}
                                    </small>
                                    <button class="play-btn" onclick="playTrack(${song.id})">‚ñ∂</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Playlists encontradas
            if (results.playlists.length > 0) {
                html += `
                    <div style="margin: 30px 0;">
                        <h4 style="color: #1DB954; margin-bottom: 15px; font-size: 1.3rem;">üìÅ Playlists (${results.playlists.length})</h4>
                        <div class="cards">
                            ${results.playlists.map(playlist => `
                                <div class="card">
                                    <img src="https://community.spotify.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2/image-size/original?v=mpbl-1&px=-1" alt="${playlist.name}">
                                    <h4>${playlist.name}</h4>
                                    <p>${playlist.songs ? playlist.songs.length : 0} m√∫sicas</p>
                                    <button class="play-btn" onclick="playPlaylist(${playlist.id})">‚ñ∂</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Artistas encontrados
            if (results.artistas.length > 0) {
                html += `
                    <div style="margin: 30px 0;">
                        <h4 style="color: #1DB954; margin-bottom: 15px; font-size: 1.3rem;">üë§ Artistas (${results.artistas.length})</h4>
                        <div class="cards">
                            ${results.artistas.map(artist => `
                                <div class="card">
                                    <img src="${artist.image}" alt="${artist.name}" style="border-radius: 50%;">
                                    <h4>${artist.name}</h4>
                                    <p>Artista</p>
                                    <button class="follow-btn" onclick="toggleFollow('${artist.name}')">Seguir</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // Nenhum resultado
            if (results.musicas.length === 0 && results.playlists.length === 0 && results.artistas.length === 0) {
                html += `
                    <div style="text-align: center; padding: 40px; color: #bbb;">
                        <h3 style="color: #bbb; margin-bottom: 20px;">üòî Nenhum resultado encontrado</h3>
                        <p>Tente pesquisar por:</p>
                        <ul style="text-align: left; display: inline-block; color: #888;">
                            <li>"Entrelinhas"</li>
                            <li>"Boaventura"</li>
                            <li>"Drake"</li>
                            <li>"The Weeknd"</li>
                            <li>"Hip Hop" ou "Pop"</li>
                        </ul>
                    </div>
                `;
            }

            resultsSection.innerHTML = html;
            resultsSection.style.display = 'block';
        }

        function showMainContent() {
            document.getElementById('searchResultsSection').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('searchInput').value = '';
        }

        // ===== SISTEMA DE √ÅUDIO FUNCIONAL NO GITHUB =====
        function playTrack(songId) {
            const song = sampleSongs.find(s => s.id === songId);
            if (!song) return;

            // Se a m√∫sica √© "playable", tenta tocar o √°udio
            if (song.playable && song.audio) {
                playAudio(song);
            } else {
                // Se n√£o, mostra op√ß√£o do YouTube
                showYouTubeOption(song);
            }
        }

        function playAudio(song) {
            // Para √°udio anterior
            audioPlayer.pause();
            
            // Configura player
            document.getElementById('playerSongTitle').textContent = song.title;
            document.getElementById('playerArtist').textContent = song.artist;
            document.getElementById('playerAlbumCover').src = song.cover;
            document.getElementById('musicPlayer').classList.add('player-visible');

            // Toca o √°udio
            audioPlayer.src = song.audio;
            audioPlayer.play()
                .then(() => {
                    isPlaying = true;
                    document.getElementById('playPauseBtn').textContent = '‚è∏';
                    showNotification(`üéµ Tocando: ${song.title} - ${song.artist}`);
                    
                    // Configura eventos de progresso
                    audioPlayer.ontimeupdate = updateProgress;
                    audioPlayer.onloadedmetadata = () => {
                        document.getElementById('totalTime').textContent = formatTime(audioPlayer.duration);
                    };
                    audioPlayer.onended = nextSong;
                })
                .catch(error => {
                    console.error('Erro ao reproduzir:', error);
                    showYouTubeOption(song);
                });
        }

        function showYouTubeOption(song) {
            const modalHtml = `
                <div class="youtube-modal">
                    <div class="youtube-modal-content">
                        <h3 style="color: #1DB954; margin-bottom: 20px;">üéµ ${song.title}</h3>
                        
                        <div style="display: flex; gap: 15px; margin-bottom: 20px; align-items: center;">
                            <img src="${song.cover}" alt="${song.title}" style="width: 80px; height: 80px; border-radius: 8px;">
                            <div style="text-align: left;">
                                <h4 style="color: white; margin: 0 0 5px 0;">${song.title}</h4>
                                <p style="color: #bbb; margin: 0;">${song.artist}</p>
                            </div>
                        </div>
                        
                        <p style="color: #bbb; margin-bottom: 20px;">
                            Para ouvir esta m√∫sica completa no YouTube:
                        </p>
                        
                        <button onclick="openYouTube('${song.youtubeSearch || song.title + ' ' + song.artist}')" style="
                            background: #FF0000;
                            border: none;
                            color: white;
                            padding: 12px 25px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 1rem;
                            font-weight: bold;
                            margin: 5px;
                        ">üéµ Ouvir no YouTube</button>
                        
                        <button onclick="closeYouTubeModal()" style="
                            background: #666;
                            border: none;
                            color: white;
                            padding: 12px 25px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 1rem;
                            margin: 5px;
                        ">Fechar</button>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }

        function openYouTube(searchQuery) {
            const encodedQuery = encodeURIComponent(searchQuery + " official audio");
            window.open(`https://www.youtube.com/results?search_query=${encodedQuery}`, '_blank');
            closeYouTubeModal();
        }

        function closeYouTubeModal() {
            const modal = document.querySelector('.youtube-modal');
            if (modal) {
                modal.remove();
            }
        }

        // ===== CONTROLES DO PLAYER =====
        function togglePlay() {
            if (!audioPlayer.src) return;
            
            if (isPlaying) {
                audioPlayer.pause();
                document.getElementById('playPauseBtn').textContent = '‚ñ∂';
            } else {
                audioPlayer.play();
                document.getElementById('playPauseBtn').textContent = '‚è∏';
            }
            isPlaying = !isPlaying;
        }

        function nextSong() {
            if (currentPlaylist.length === 0) {
                currentPlaylist = sampleSongs;
            }
            currentSongIndex = (currentSongIndex + 1) % currentPlaylist.length;
            playTrack(currentPlaylist[currentSongIndex].id);
        }

        function previousSong() {
            if (currentPlaylist.length === 0) {
                currentPlaylist = sampleSongs;
            }
            currentSongIndex = (currentSongIndex - 1 + currentPlaylist.length) % currentPlaylist.length;
            playTrack(currentPlaylist[currentSongIndex].id);
        }

        function updateProgress() {
            if (!audioPlayer.src || isNaN(audioPlayer.duration)) return;
            
            const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            document.getElementById('songProgress').style.width = `${progress}%`;
            document.getElementById('currentTime').textContent = formatTime(audioPlayer.currentTime);
        }

        function seekSong(event) {
            if (!audioPlayer.src || isNaN(audioPlayer.duration)) return;
            
            const progressBar = event.currentTarget;
            const clickPosition = event.offsetX;
            const totalWidth = progressBar.offsetWidth;
            const seekTime = (clickPosition / totalWidth) * audioPlayer.duration;
            
            audioPlayer.currentTime = seekTime;
        }

        function changeVolume(event) {
            const volumeBar = event.currentTarget;
            const clickPosition = event.offsetX;
            const totalWidth = volumeBar.offsetWidth;
            const volume = clickPosition / totalWidth;
            
            document.getElementById('volumeLevel').style.width = `${volume * 100}%`;
            audioPlayer.volume = volume;
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // ===== FUN√á√ïES AUXILIARES =====
        function showNotification(message) {
            // Remove notifica√ß√£o anterior se existir
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #1DB954;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 10000;
                font-weight: bold;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        function toggleFollow(artistName) {
            showNotification(`üéµ Voc√™ come√ßou a seguir ${artistName}!`);
        }

        // ===== CARREGAR CONTE√öDO INICIAL =====
        function loadPopularSongs() {
            const container = document.getElementById('popularSongs');
            container.innerHTML = sampleSongs.map(song => `
                <div class="card">
                    <img src="${song.cover}" alt="${song.title}">
                    <h4>${song.title}</h4>
                    <p>${song.artist}</p>
                    <button class="play-btn" onclick="playTrack(${song.id})">‚ñ∂</button>
                </div>
            `).join('');
        }

        function loadPlaylists() {
            const userPlaylists = document.getElementById('userPlaylists');
            const playlists = JSON.parse(localStorage.getItem('userPlaylists')) || [];
            userPlaylists.innerHTML = '';
            
            playlists.forEach(playlist => {
                const playlistCard = document.createElement('div');
                playlistCard.className = 'card';
                playlistCard.innerHTML = `
                    <img src="https://community.spotify.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2/image-size/original?v=mpbl-1&px=-1" alt="${playlist.name}">
                    <h4>${playlist.name}</h4>
                    <p>${playlist.songs ? playlist.songs.length : 0} m√∫sicas</p>
                    <button class="play-btn" onclick="playPlaylist(${playlist.id})">‚ñ∂</button>
                `;
                userPlaylists.appendChild(playlistCard);
            });
        }

        function playPlaylist(playlistId) {
            const playlists = JSON.parse(localStorage.getItem('userPlaylists')) || [];
            const playlist = playlists.find(p => p.id === playlistId);

            if (playlist && playlist.songs && playlist.songs.length > 0) {
                currentPlaylist = playlist.songs;
                playTrack(currentPlaylist[0].id);
            } else {
                alert('Playlist vazia! Adicione m√∫sicas primeiro.');
            }
        }

        // ===== CONFIGURA√á√ÉO DOS EVENT LISTENERS =====
        function setupEventListeners() {
            document.getElementById('searchBtn').addEventListener('click', performSearch);
            
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            document.getElementById('searchInput').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    showMainContent();
                }
            });

            document.getElementById('criarPlaylistBtn').addEventListener('click', function() {
                const nomePlaylist = prompt('Digite o nome da nova playlist:');
                if (nomePlaylist && nomePlaylist.trim()) {
                    let playlists = JSON.parse(localStorage.getItem('userPlaylists')) || [];
                    const newPlaylist = {
                        id: Date.now(),
                        name: nomePlaylist.trim(),
                        songs: []
                    };
                    playlists.push(newPlaylist);
                    localStorage.setItem('userPlaylists', JSON.stringify(playlists));
                    loadPlaylists();
                    showNotification(`üìÅ Playlist "${nomePlaylist}" criada com sucesso!`);
                }
            });

            document.getElementById('explorePodcastsBtn').addEventListener('click', function() {
                showNotification('üéôÔ∏è Funcionalidade de podcasts em desenvolvimento!');
            });
        }

        // ===== INICIALIZA√á√ÉO =====
        window.addEventListener('DOMContentLoaded', function() {
            // Verifica login (simula√ß√£o)
            if (!sessionStorage.getItem('currentUser')) {
                sessionStorage.setItem('currentUser', 'usu√°rio_teste');
            }

            // Carrega conte√∫do
            loadPopularSongs();
            loadPlaylists();
            setupEventListeners();

            // Configura volume inicial
            audioPlayer.volume = 0.7;
            document.getElementById('volumeLevel').style.width = '70%';
        });

        function logout() {
            sessionStorage.removeItem('currentUser');
            return true;
        }
    </script>
</body>
</html>
